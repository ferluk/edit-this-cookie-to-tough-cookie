{"version":3,"sources":["etc2tc.js"],"names":["createObj","obj","name","undefined","pushValue","src","key","dst","etc2tc","srcFile","dstFile","srcJson","JSON","parse","Fs","readFileSync","dstJson","_","each","c","domain","charAt","slice","path","creation","Moment","lastAccessed","expirationDate","parseInt","writeFileSync","stringify","require","module","exports"],"mappings":"AAAA,YAMA,SAASA,WAAUC,EAAKC,GAIpB,MAHkBC,UAAdF,EAAIC,KACJD,EAAIC,OAEDD,EAAIC,GAGf,QAASE,WAAUC,EAAKC,EAAKC,GACRJ,SAAbE,EAAIC,KACJC,EAAID,GAAOD,EAAIC,IAIvB,QAASE,QAAOC,EAASC,GACrB,IAAKD,IAAYC,EACb,MAAO,KAGX,IAAIC,GAAUC,KAAKC,MAAMC,GAAGC,aAAaN,EAAS,SAC9CO,IAyCJ,OAvCAC,GAAEC,KAAKP,EAAS,SAASQ,GACM,MAAvBA,EAAEC,OAAOC,OAAO,KAChBF,EAAEC,OAASD,EAAEC,OAAOE,MAAM,GAG9B,IAAIf,IACAa,OAAUD,EAAEC,OACZG,KAAQJ,EAAEI,KACVjB,IAAOa,EAAEjB,KAMTsB,SAAYC,SAIZC,aAAgBD,SAGpBrB,WAAUe,EAAG,QAASZ,GACtBH,UAAUe,EAAG,SAAUZ,GACvBH,UAAUe,EAAG,SAAUZ,GACvBH,UAAUe,EAAG,WAAYZ,GACzBH,UAAUe,EAAG,aAAcZ,GAC3BH,UAAUe,EAAG,gBAAiBZ,GAC9BH,UAAUe,EAAG,WAAYZ,GACzBH,UAAUe,EAAG,gBAAiBZ,GAELJ,SAArBgB,EAAEQ,iBACFpB,EAAa,QAAIkB,OAAOG,SAA4B,IAAnBT,EAAEQ,kBAGvC3B,UAAUA,UAAUA,UAAUgB,EAASG,EAAEC,QAASD,EAAEI,MAAOJ,EAAEjB,MAC7Dc,EAAQG,EAAEC,QAAQD,EAAEI,MAAMJ,EAAEjB,MAAQK,IAGxCO,GAAGe,cAAcnB,EAASE,KAAKkB,UAAUd,GAAU,QAC5CN,EAhEX,KAAMI,IAAKiB,QAAQ,MACbd,EAAIc,QAAQ,UACZN,OAASM,QAAQ,SAiEvBC,QAAOC,QAAUzB","file":"etc2tc.min.js","sourcesContent":["'use strict';\n\nconst Fs = require('fs');\nconst _ = require('lodash');\nconst Moment = require('moment');\n\nfunction createObj(obj, name) {\n    if (obj[name] === undefined) {\n        obj[name] = {};\n    }\n    return obj[name];\n}\n\nfunction pushValue(src, key, dst) {\n    if (src[key] !== undefined) {\n        dst[key] = src[key];\n    }\n}\n\nfunction etc2tc(srcFile, dstFile) {\n    if (!srcFile || !dstFile) {\n        return null;\n    }\n\n    var srcJson = JSON.parse(Fs.readFileSync(srcFile, 'utf8'));\n    var dstJson = {};\n\n    _.each(srcJson, function(c) {\n        if (c.domain.charAt(0) === '.') {\n            c.domain = c.domain.slice(1);\n        }\n\n        var dst = {\n            'domain': c.domain,\n            'path': c.path,\n            'key': c.name,\n            // 'value': c.value,\n            // 'maxAge': c.maxAge,\n            // 'secure': c.secure,\n            // 'httpOnly': c.httpOnly,\n            // 'extensions': c.extensions,\n            'creation': Moment(),\n            // 'creationIndex': c.creationIndex,\n            // 'hostOnly': c.hostOnly,\n            // 'pathIsDefault': c.pathIsDefault,\n            'lastAccessed': Moment()\n        };\n\n        pushValue(c, 'value', dst);\n        pushValue(c, 'maxAge', dst);\n        pushValue(c, 'secure', dst);\n        pushValue(c, 'httpOnly', dst);\n        pushValue(c, 'extensions', dst);\n        pushValue(c, 'creationIndex', dst);\n        pushValue(c, 'hostOnly', dst);\n        pushValue(c, 'pathIsDefault', dst);\n\n        if (c.expirationDate !== undefined) {\n            dst['expires'] = Moment(parseInt(c.expirationDate * 1000));\n        }\n\n        createObj(createObj(createObj(dstJson, c.domain), c.path), c.name);\n        dstJson[c.domain][c.path][c.name] = dst;\n    });\n\n    Fs.writeFileSync(dstFile, JSON.stringify(dstJson), 'utf8');\n    return dstFile;\n}\n\nmodule.exports = etc2tc;\n"]}